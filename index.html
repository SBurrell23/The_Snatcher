<!doctype html>
<head>
    <link rel="icon" href="Assets/faviconHauntedHouse.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">
    <script src="Client/GameClient.js"></script>
    <title>The Snatcher!</title>
</head>

<style>
    html body{
        background-color: #3c3c3cad
    }
    #gameHeader{
        font-family: 'Nunito';
        font-size: 50px;
        font-weight: bold;
    }
    #queueHeader{
        font-size: 25px;
    }
    #playerQueue, #queueHeader{
        font-family: 'Nunito';
    }
    #joinInputs{
        margin-top:30px;
        margin-bottom:10px;
    }
    .custom-container {
        max-width: 95% !important; /* Adjust the value as needed */
        min-width: 1200px;
    }
</style>
<body>
    <div class="container custom-container" style="margin-top:35px;">
        <div class="row">
            <div class="col-3">
                <div class="text-center" id="gameHeader">The<br>Snatcher!</div>
                <div class="input-group">
                    <div class="input-group" id="joinInputs">
                        <input id="playerNameInput" maxlength="15" class="form-control" placeholder="Choose A Name" />
                        <button class="btn btn-primary" id="joinGameButton" type="button">Join Game</button>
                    </div>
                </div>
                <div class="text-center">
                    <h3 style="margin-top:30px;" id="queueHeader"><b>Players</b></h3>
                    <table class="table table-sm table-dark" id="playerQueue">
                        <thead>
                            <tr>
                            <th scope="col" style="border-top-left-radius:4px;">Name</th>
                            <th scope="col">Points</th>
                            <th scope="col">R. Wins</th>
                            <th scope="col" style="border-top-right-radius:4px;">S. Wins</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    <br>
                    <button class="btn btn-lg btn-primary" id="startGameButton">Start Game</button>
                </div>
            </div>
            <div class="col-9">
                <canvas id="canvas" width="1050" height="750" style="border-radius: 4px;"></canvas><br>
                <div id="gameContainer"></div>
            </div>
        </div>
    </div>
    <div id="offlineMessage" style="display:flex;position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #ff7979; color: black;justify-content: center; align-items: center; font-size: 34px;z-index: 10000;">
        <span>Attempting to connect to game server...</span>
    </div>
</body>

<br>
<!-- 

IDEAS

The Snatcher (2+ Players)
One player is the snatcher, the rest are runners.
A procedurally generated maze is created.
The snatcher spawns in the middle of the maze, the runners spawn on the outside.

The snatcher has to catch all the runners before:
    the runners escape by finding X keys hidden on the map and bringing them to the (2) doors
    (players can only hold 2 keys at a time)
    (doors will require something like {numPlayers * 3} keys to open)
    (The keys are MAYBE??? visible to everyone but not on anybodys map)
    (the number of keys that spawn should be something like ({numPlayers*3} * 2) + 2)

THE MAP
The map is a procedurally generated maze (20*20 ?)
The map is 2D/2D Array
The runners can only see the rooms they have been in
Each runner can see the snatchers location on the map always
The snatcher CAN SEE THE ENTIRE MAP, but not the players
    The snatcher has a "hint" on each door about how far away from any player they are
The exit doors will be marked on snatchers map when the first one is opened.

The snatcher catches the runners by touching them
If a runner is caught, they are out and can spectate another player of their choosing
If a runner had a key(s)/item when they were caught, it is dropped on the ground

As the # of available runners decreases, the snatcher gets faster?

The game ends when:
    All the runners are caught or escaped
    The snatcher ragequits

    Runners get a Point for adding a key to the door
    Runners get more points for escaping

    The Snatcher gets a Point for catching a runner
    The Snatcher gets an extra point for total runners caught on game over



The snatcher has very limited room visibility (but can see the entire minimap and is faster)
This way players can hide if they are in the same room

Players will also potentally not have FULL visibility of the rooms, but much more then the snatcher

THERE NEEDS TO BE SOME KIND OF SKILLCHECK GAME WHEN PICKING UP A KEY/ITEM IN ORDER TO GET IT
Maybe every item is a trunk, and you have to search it and then get either a key or item

If any skillcheck game is failed, your loation is revealed on the map to the snatcher for X seconds


MORE IDEAS
Maybe a magic fireplace or two that can be used to teleport from one side of the map to another

Add a PF FLYERS powerup runners can find that makes them faster for a short period of time
Add a MAGIC MONOCLE powerup for runners that lets them see the map + players + doors for a short period of time) 
Add a THE BUTTON for runners, that randomly teleports them to a new room when activated
    Using this powerup will cause you to drop any keys you are holding
    

Add a BBQ CHILI powerup the snatcher can find that temporarily reveals the locations of all players on the map
Add a SPARE EYEBALLS powerup that increases their room vision for a moderate period of time
Add a KILL THE POWER powerup that turns off all players maps for a moderate period of time


TODO NEXT:

 DONE - Get killer items in the game only shown to killer
 DONE - Make survivor items only visible to survirors
 DONE - Create inventroy on on some side of screen to show keys + item + points + clock?

DONE - Make players only able to see rooms they have been to + the killer location
DONE - Make killer not able to see survivors or doors on map

DONE - Fix movement speed bug
DONE - need to only send movment update on tick cycle
DONE - when movment request comes in, it should get added to a new map spot for that player
DONE - and only emptied on the next tick cycle when the movment is complete

 DONE - Fix movement to make diagonal movement allowed
 DONE - this can probably be solved by listening for all key downs and sending each of the 8 posible directions
 DONE - then in on the next tick during movment make 2 reqeusts if the player is trying to move diagonal

 DONE - Limit killer vision & maybe player vision slightly

DONE - Make number show on door for killer based on how many rooms N/S/E/W they are from the nearest player

Create skill check when picking up an item or key...
items that have never been picked up will have state inCHEST

if item requested to pickup but is inCHEST
, send player back minigame challenge with item id in request
minigame will trigger client side..
if player succeeds, send back success, item id
the server will then set the item to outCHEST
and the item will replace the chest so the player can pick it up if they want

IF THEY FAIL, send failuer back and the item stays in chest AND
a new function triggers that reveals that players state to the snatcher

*** all of the snatchers items start in outcheststate


Implement power up abilites to work.


NEW THEME IDEA INSTEAD OF HAUNTED HOUSE
HEAUNTED FOREST
The exit gates are exit portals and require X 'crystals' to power on
The solid objects can all be types of trees
ambient noise can be spooky forest and walking can be leaves crunching

think I want to increase the size of the map 75 x 75 more and make the outside
of all rooms be a filled wall, entrances should expand to 2x2 instead of 1x2
so players dont immediately hit a wall when entering a room

 move player selection to canvas
 plays can click to join as the killer or 1 or 5 runners
 they can also choose to disconnect or choose another runner
 each player can only be selected once and has a special stat
 Randal - has an even larger spotlight
 Eluid - can run slightly faster
 Vincent - Easier skill checks


fix bug where holding shift other modfiied locks movement
fix coliision so players can get right up next to a wall always
-->
